const t=new class{constructor(t=null){this.board=t||[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.status="idle",this.score=0}getScore(){return this.score}getStatus(){return this.status}start(){this.board=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="playing",this.addRandomTile(),this.addRandomTile()}restart(){this.start()}addRandomTile(){let t=[];for(let e=0;e<4;e++)for(let s=0;s<4;s++)0===this.board[e][s]&&t.push([e,s]);let[e,s]=t[Math.floor(Math.random()*t.length)];this.board[e][s]=Math.random()>.1?2:4}moveLeft(){let t=!1;for(let e=0;e<4;e++){let s=this.board[e].filter(t=>0!==t),r=[],o=0;for(;o<s.length;)s[o]===s[o+1]?(r.push(2*s[o]),this.score+=2*s[o],o+=2):(r.push(s[o]),o++);for(;r.length<4;)r.push(0);this.arraysEqual(this.board[e],r)||(t=!0),this.board[e]=r}t&&(this.addRandomTile(),this.checkWin(),this.checkLose())}arraysEqual(t,e){return t.every((t,s)=>t===e[s])}moveRight(){this.board.forEach(t=>t.reverse()),this.moveLeft(),this.board.forEach(t=>t.reverse())}moveUp(){this.board=this.transposeBoard(),this.moveLeft(),this.board=this.transposeBoard()}moveDown(){this.board=this.transposeBoard(),this.moveRight(),this.board=this.transposeBoard()}transposeBoard(){return this.board[0].map((t,e)=>this.board.map(t=>t[e]))}checkWin(){this.board.some(t=>t.includes(2048))&&(this.status="win")}checkLose(){this.canMove()||(this.status="lose")}canMove(){for(let t=0;t<4;t++)for(let e=0;e<4;e++)if(0===this.board[t][e]||t<3&&this.board[t][e]===this.board[t+1][e]||e<3&&this.board[t][e]===this.board[t][e+1])return!0;return!1}getState(){return{board:this.board,score:this.score,statusGame:this.status}}},e=document.querySelector(".start");function s(){let{board:e,score:s,statusGame:r}=t.getState();document.querySelectorAll(".field-cell").forEach((t,s)=>{let r=e[Math.floor(s/4)][s%4],o=[...t.classList].find(t=>t.startsWith("field-cell--"));o&&t.classList.remove(o),t.textContent=r||"",r&&t.classList.add(`field-cell--${r}`)}),document.querySelector(".game-score").textContent=s,"win"===r?document.querySelector(".message-win").classList.remove("hidden"):"lose"===r?document.querySelector(".message-lose").classList.remove("hidden"):document.querySelector(".message-start").classList.remove("hidden")}document.querySelector(".start").addEventListener("click",()=>{t.start(),document.querySelector(".message-start").style.display="none",document.querySelector(".message-lose").classList.add("hidden"),s(),e.classList.remove("start"),e.classList.add("restart"),e.textContent="Restart"}),document.addEventListener("keydown",e=>{if("playing"===t.status){switch(e.key){case"ArrowLeft":e.preventDefault(),t.moveLeft();break;case"ArrowRight":e.preventDefault(),t.moveRight();break;case"ArrowUp":e.preventDefault(),t.moveUp();break;case"ArrowDown":e.preventDefault(),t.moveDown()}s()}});
//# sourceMappingURL=index.e1158061.js.map
